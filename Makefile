BIN_DIR=./bin
BINARY_NAME=cve-2021-22205-hash-generator

build_bin:
	GOARCH=amd64 GOOS=darwin go build -o ${BIN_DIR}/${BINARY_NAME}-darwin main.go
	GOARCH=amd64 GOOS=linux go build -o ${BIN_DIR}/${BINARY_NAME}-linux main.go
	GOARCH=amd64 GOOS=windows go build -o ${BIN_DIR}/${BINARY_NAME}-windows main.go

init:
	go mod download
	go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest

quality_check:
	go vet
	golangci-lint run

test:
	go test ./... -v
	quality_check

build:
	test
	quality_check
	build_bin

clean:
	go clean
	rm ${BIN_DIR}/${BINARY_NAME}*
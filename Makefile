BIN_DIR=./bin
BINARY_NAME=cve-2021-22205-hash-generator

build_bin:
	GOARCH=amd64 GOOS=darwin go build -o ${BIN_DIR}/${BINARY_NAME}-darwin main.go
	GOARCH=amd64 GOOS=linux go build -o ${BIN_DIR}/${BINARY_NAME}-linux main.go
	GOARCH=amd64 GOOS=windows go build -o ${BIN_DIR}/${BINARY_NAME}-windows main.go

test:
	go test ./... -v

build:test build_bin

clean:
	go clean
	rm ${BIN_DIR}/${BINARY_NAME}*
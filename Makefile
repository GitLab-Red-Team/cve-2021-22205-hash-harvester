BIN_DIR=./bin
BINARY_NAME=cve-2021-22205-hash-generator

binaries:
	GOARCH=amd64 GOOS=darwin go build -o ${BIN_DIR}/${BINARY_NAME}-darwin main.go
	GOARCH=amd64 GOOS=linux go build -o ${BIN_DIR}/${BINARY_NAME}-linux main.go
	GOARCH=amd64 GOOS=windows go build -o ${BIN_DIR}/${BINARY_NAME}-windows main.go

clean:
	go clean
	rm -f ${BIN_DIR}/${BINARY_NAME}*

init:
	go mod download
	go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
	which golangci-lint

lint:
	go vet
	golangci-lint run ./...

test:
	go test ./... -v \

build: clean init lint binaries